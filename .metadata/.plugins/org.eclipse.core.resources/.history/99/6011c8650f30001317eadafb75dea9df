var window = Ti.UI.createWindow();

var view1 = Titanium.UI.createView({
	backgroundcolor:'21DCEE'
});
var view2 = Titanium.UI.createView({});

var alerts = [
{"name" : "abc", "meaning" : "alphabets"},
{"name" : "pqr", "meaning" : "morealphabets"}];
var textName = Titanium.UI.createTextField({
	top:100,
	left:50,
	height:50,
	width:150,
	borderStyle: Ti.UI.INPUT_BORDERSTYLE_ROUNDED,
	hintText:'Enter the word'
});

var textMeaning = Titanium.UI.createTextField({
	top: 200,
	left:50,
	width:150,
	height:50,
	borderStyle: Ti.UI.INPUT_BORDERSTYLE_ROUNDED,
	hintText:'Enter its meaning'
});

var submit = Titanium.UI.createButton({
	top:300,
	left:100,
	title:'Submit'
});

var tableView = Ti.UI.createTableView();
var tableData = [];
var fileName = 'wordsAndMeanings.json';
var file = Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory, fileName); 
var preParseData = file.read();
var response = JSON.parse(preParseData);
Ti.API.info(response.words.length);
for(var i = 0; i < response.words.length ; i++){
	word = response.words[i];
	row = Ti.UI.createTableViewRow({
		height : '60dp'
	});
	nameLabel = Ti.UI.createLabel({
		text: word.name,
		font: { fontSize:'24dp', fontWeight:'bold'},
		height:'auto',
		left:'10dp',
		color:'#000',
		touchEnabled : false
	});
	row.add(nameLabel);
	tableData.push(row);
	tableView.setData(tableData);
}

var add = Titanium.UI.createButton({
	title: 'Add',
	top: 150,
	left: 50
});

add.addEventListener('click',function(e){
	window2 = Titanium.UI.createWindow({
		backgroundColor:'8FD2ED'
	});

	submit.addEventListener('click', function(e){
		//response.words.push({"name" : "abc", "meaning" : "alphabets"});
		//Ti.API.info(typeof(textName.value));
		//var one = JSON.parse(textName.value);
		//Ti.API.info(one);
		//var obj = eval("(" + textName.value + ")");
		//Ti.API.info(obj);
		var log = Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory,'wordsAndMeanings.json');
		log.write('My log file\n');
		for(var i=0; i<3; i++) {
    	log.write(i+': new log statement\n', true); // Boolean argument causes write() to append
		}
		alert(log.read().text);
		//alerts.push({"name" : textName.value, "meaning" : textMeaning.value});
		//Ti.API.info(alerts);
		//var file2 = Titanium.FileSystem.getFile(Titanium.FileSystem.resourcesDirectory,'wordsAndMeanings.json');
		//file2.write()
	});
	
	
	window2.open();
	window2.add(view2);
	view2.add(textName);
	view2.add(textMeaning);
	view2.add(submit);
});
window.open();
window.add(view1);
view1.add(tableView);
view1.add(add);

// 
// var win = Ti.UI.createWindow();
//  
// // here the reponse will be written
// var texArea = Ti.UI.createTextArea({value:'',top:20,right:20,left:20,bottom:20,backgroundColor:'white', font:{fontSize:20}});
//  
// win.add(texArea);
//  
// win.open();
//  
//  
// var xhr = Ti.Network.createHTTPClient();
// xhr.onload = function(){
	// try{
		// var json = JSON.parse(this.responseText);
		// // show the json in the textArea
		// texArea.value = json;
// 		
		// // write it to the file system
		// var file1 = Titanium.Filesystem.getFile(
			// Titanium.Filesystem.applicationDataDirectory, 'json.json'
		// );
		// file1.write(json);
// 		
		// // show it as MD5 (after 2 seconds, just for fun)
		// setTimeout(function(){
			// var file2 = Titanium.Filesystem.getFile(
				// Titanium.Filesystem.applicationDataDirectory, 'json.json'
			// );
			// texArea.value = Ti.Utils.md5HexDigest(file2.toBlob());
		// },2000);
//  
	// }catch(e){
		// Ti.API.info(e);
	// }
// };
// xhr.onerror = function(e){
	// alert(e);
// };
//  
// // get my test json
// xhr.open('GET', 'https://s3.amazonaws.com/pedruqui/tests/hotels.json');
// xhr.send();


